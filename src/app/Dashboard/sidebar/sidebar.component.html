<aside
  class="sidebar-root h-full bg-surface border-r border-strong overflow-y-auto"
  [ngClass]="{
    'sidebar-collapsed': collapsed && !hovering,
    'sidebar-hovering': collapsed && hovering
  }"
>
  <nav class="mt-8 px-4 space-y-2">
    <!-- Dashboards -->
    <div class="space-y-2" *ngIf="canAccessModule('dashboard')">
      <a
        [routerLink]="routes.dashboard"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Dashboard' : null"
      >
        <i
          class="sidebar-icon fas fa-tachometer-alt fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Dashboard</span>
      </a>
    </div>

    <!-- Catálogo Insumos -->
    <div class="space-y-2" *ngIf="canAccessModule('catalogo')">
      <a
        [routerLink]="routes.catalogoInsumos"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Catálogo Insumos' : null"
      >
        <i
          class="sidebar-icon fas fa-boxes fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Catálogo Insumos</span>
      </a>
    </div>

    <!-- Compras -->
    <div class="space-y-2" *ngIf="canAccessModule('compras')">
      <a
        [routerLink]="routes.compras"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Compras' : null"
      >
        <i
          class="sidebar-icon fas fa-shopping-cart fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Compras</span>
      </a>
    </div>

    <!-- Despachos -->
    <div class="space-y-2" *ngIf="canAccessModule('despachos')">
      <a
        [routerLink]="routes.despachos"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Despachos' : null"
      >
        <i
          class="sidebar-icon fas fa-truck fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Despachos</span>
      </a>
    </div>

    <!-- Reportes -->
    <div class="space-y-2" *ngIf="canAccessModule('reportes')">
      <div class="sidebar-heading-wrapper px-4 pt-2">
        <h3
          class="sidebar-heading text-xs font-semibold uppercase tracking-wider text-muted"
        >
          Reportes
        </h3>
      </div>
      <a
        [routerLink]="routes.reportes"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Resumen de reportes' : null"
      >
        <i
          class="sidebar-icon fas fa-chart-line fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Resumen</span>
      </a>
      <a
        *ngIf="canAccessModule('consumos')"
        [routerLink]="routes.consumosMensuales"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Consumos mensuales' : null"
      >
        <i
          class="sidebar-icon fas fa-calendar-alt fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Consumos mensuales</span>
      </a>
      <a
        *ngIf="canAccessModule('reportes-compras')"
        [routerLink]="routes.comprasAnuales"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Compras anuales' : null"
      >
        <i
          class="sidebar-icon fas fa-shopping-basket fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Compras anuales</span>
      </a>
      <a
        *ngIf="canAccessModule('reportes-despachos')"
        [routerLink]="routes.despachosAnuales"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Despachos anuales' : null"
      >
        <i
          class="sidebar-icon fas fa-shipping-fast fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Despachos anuales</span>
      </a>
      <a
        *ngIf="canAccessModule('reportes-reajustes')"
        [routerLink]="routes.reajustesAnuales"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Reajustes por año' : null"
      >
        <i
          class="sidebar-icon fas fa-exchange-alt fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Reajustes por año</span>
      </a>
    </div>

    <!-- Migracion Excel -->
    <div class="space-y-2" *ngIf="canAccessModule('migracion')">
      <a
        [routerLink]="routes.migracionExcel"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'ACT Catalogo' : null"
      >
        <i
          class="sidebar-icon fas fa-file-excel fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">ACT Catalogo</span>
      </a>
    </div>

    <!-- Servicios -->
    <div class="space-y-2" *ngIf="canAccessModule('servicios')">
      <a
        [routerLink]="routes.servicios"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Servicios' : null"
      >
        <i
          class="sidebar-icon fas fa-tools fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Servicios</span>
      </a>
    </div>

    <!-- Inventario -->
    <div class="space-y-2" *ngIf="canAccessModule('inventario')">
      <a
        [routerLink]="routes.inventario"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Inventario' : null"
      >
        <i
          class="sidebar-icon fas fa-clipboard-list fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Inventario</span>
      </a>
    </div>

    <!-- Reajustes -->
    <div class="space-y-2" *ngIf="puedeReajustes">
      <div class="sidebar-heading-wrapper px-4 pt-2">
        <h3
          class="sidebar-heading text-xs font-semibold uppercase tracking-wider text-muted"
        >
          Reajustes
        </h3>
      </div>
      <a
        [routerLink]="routes.reajustes"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Listado de reajustes' : null"
      >
        <i
          class="sidebar-icon fas fa-sliders-h fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Listado de reajustes</span>
      </a>
      <a
        [routerLink]="routes.reajustesNuevo"
        class="sidebar-item flex items-center w-full px-4 py-3 text-sm font-medium text-emerald-200 rounded-lg border border-emerald-500/40 hover:bg-emerald-500/10 hover:border-emerald-400 transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Nuevo reajuste' : null"
      >
        <i
          class="sidebar-icon sidebar-icon--accent fas fa-plus-circle fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Nuevo reajuste</span>
      </a>
    </div>

    <!-- Gestión de Usuarios -->
    <div class="space-y-2" *ngIf="administracionVisible">
      <div class="sidebar-heading-wrapper px-4 py-2">
        <h3
          class="sidebar-heading text-xs font-semibold text-muted uppercase tracking-wider"
        >
          Administración
        </h3>
      </div>

      <!-- Usuarios -->
      <a
        *ngIf="canAccessModule('usuarios')"
        [routerLink]="routes.usuarios"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Usuarios' : null"
      >
        <i
          class="sidebar-icon fas fa-users fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Usuarios</span>
      </a>

      <!-- Roles -->
      <a
        *ngIf="canAccessModule('roles')"
        [routerLink]="routes.roles"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Roles' : null"
      >
        <i
          class="sidebar-icon fas fa-user-tag fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Roles</span>
      </a>

      <!-- Permisos -->
      <a
        *ngIf="canAccessModule('permisos')"
        [routerLink]="routes.permisos"
        class="sidebar-item flex items-center w-full px-4 py-3 text-base font-medium text-muted-strong rounded-lg hover:bg-surface-alt hover:text-heading transition-colors group ml-4"
        (click)="emitNavigate()"
        [attr.title]="collapsed && !hovering ? 'Permisos' : null"
      >
        <i
          class="sidebar-icon fas fa-key fa-lg fa-fw mr-3"
          aria-hidden="true"
        ></i>
        <span class="sidebar-label">Permisos</span>
      </a>
    </div>

    <!-- Divider -->
    <div class="sidebar-divider border-t border-subtle my-4"></div>
  </nav>
</aside>
