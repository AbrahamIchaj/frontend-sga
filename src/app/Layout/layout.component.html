<div class="min-h-screen flex flex-col bg-body text-body">
  <app-header
    [sidebarOpen]="sidebarOpen"
    (sidebarToggle)="toggleSidebar()"
  ></app-header>

  <div class="relative flex flex-1 min-h-0 overflow-hidden">
    <div
      class="sidebar-wrapper fixed inset-y-0 left-0 z-40 transform bg-surface shadow-elevated border border-strong transition-[transform,width] duration-300 ease-in-out lg:static lg:z-auto lg:flex-shrink-0 lg:translate-x-0 lg:shadow-none"
      [class.translate-x-0]="sidebarOpen || isDesktop"
      [class.-translate-x-full]="!sidebarOpen && !isDesktop"
      [class.sidebar-collapsed]="
        !sidebarOpen && isDesktop && !isSidebarHovering
      "
      [class.sidebar-hovering]="!sidebarOpen && isDesktop && isSidebarHovering"
      (mouseenter)="onSidebarMouseEnter()"
      (mouseleave)="onSidebarMouseLeave()"
    >
      <app-sidebar
        [collapsed]="!sidebarOpen && isDesktop"
        [hovering]="isSidebarHovering"
        (navigate)="handleSidebarNavigate()"
      ></app-sidebar>
    </div>

    <div
      *ngIf="sidebarOpen && !isDesktop"
      class="fixed inset-0 z-30 bg-slate-900/70 backdrop-blur-sm transition-opacity duration-300 lg:hidden"
      (click)="closeSidebar()"
    ></div>

    <main class="flex-1 min-h-0 overflow-y-auto">
      <div class="page-shell">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
